(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(5658)}])},5658:function(t,e,n){"use strict";n.r(e),n.d(e,{__N_SSG:function(){return c},default:function(){return d}});var $=n(5893),i=n(7294),a=1e3/60,s={touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,mouseleave:2},_=function(t,e,n,$,i){var a=Math.PI/180*i,s=Math.cos(a),_=Math.sin(a);return{x:s*(n-t)+_*($-e)+t,y:s*($-e)-_*(n-t)+e}},r=function(){function t(e){var n=e.container,$=e.muted,i=this;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,t),this.count=0,this.v={r:12,y:2,t:0,w:0,d:.988},this.inertia=.08,this.sticky=.1,this.maxR=60,this.maxY=110,this.last=null,this.rotate=0,this.initiated=!1,this.pageX=0,this.pageY=0,this.height=800,this.width=500,this.setMuted=function(t){Object.values(i.audio).forEach(function(e){e.muted=!0,e.play(),e.pause(),e.muted=t}),i.muted=t},this.dispose=function(){var t=i.outline,e=i.container;t.removeEventListener("mousedown",i.start),t.removeEventListener("touchstart",i.start),document.removeEventListener("mousemove",i.move),document.removeEventListener("touchmove",i.move),document.removeEventListener("mouseup",i.end),document.removeEventListener("mouseleave",i.end),document.removeEventListener("touchcancel",i.end),document.removeEventListener("touchend",i.end),e.removeChild(t),e.removeChild(i.canvas)},this.start=function(t){t.preventDefault();var e=s[t.type];if(!i.initiated||i.initiated===e){i.initiated=e;var n="targetTouches"in t?t.touches[0]:t;i.pageX=n.pageX,i.pageY=n.pageY;var $=i.audio,a=$.transient,_=$.dancing,r=$.crazy;a.muted=i.muted,_.muted=i.muted,r.muted=i.muted}},this.move=function(t){if(s[t.type]===i.initiated){var e,n="targetTouches"in t?t.touches[0]:t,$=i.image.getBoundingClientRect(),a=$.left+$.width/2,_=n.pageX,r=n.pageY-i.pageY,o=(_-a)*i.sticky;o=Math.max(-i.maxR,o),o=Math.min(i.maxR,o),r=r*i.sticky*3,r=Math.max(-i.maxY,r),r=Math.min(i.maxY,r),i.v.r=o,i.v.y=r,i.v.w=0,i.v.t=0,i.draw()}},this.end=function(t){s[t.type]===i.initiated&&(i.initiated=!1,i.run(),i.play())},this.play=function(){i.count++;var t=i.audio,e=t.transient,n=t.dancing,$=t.crazy;i.count>2?(i.count=0,$.currentTime=0,$.play(),e.pause(),n.pause()):6>=Math.abs(i.v.r)?(e.currentTime=0,e.play(),n.pause(),$.pause()):Math.abs(i.v.r)>6&&30>=Math.abs(i.v.r)?(n.currentTime=0,n.play(),e.pause(),$.pause()):Math.abs(i.v.r)>30&&($.currentTime=0,$.play(),e.pause(),n.pause())},this.draw=function(){var t=i.v,e=t.r,n=t.y;i.image.style.transform="rotate(".concat(e,"deg) translateX(").concat(5*e,"px) translateY(").concat(n,"px)");var $=i.context,a=i.width,s=i.height;$.clearRect(0,0,a,s),$.save(),$.strokeStyle="#182562",$.lineWidth=10,$.beginPath(),$.translate(a/2,640),$.moveTo(0,200);var r=_(0,-100,e,-n,e),o=r.x,u=-r.y-100;$.quadraticCurveTo(0,75,o,u),$.stroke(),$.restore()},this.run=function(){if(!i.initiated){var t=Date.now(),e=i.inertia,n=i.last?t-i.last:16;n<16&&(e=e/a*n),i.last=t;var $=i.v,s=$.r,_=$.y,r=$.t,o=$.w,u=$.d;o=o-2*s-i.rotate,s+=o*e*1.2,i.v.w=o*u,i.v.r=s,r-=2*_,_+=r*e*2,i.v.t=r*u,i.v.y=_,!(.1>Math.max(Math.abs(i.v.w),Math.abs(i.v.r),Math.abs(i.v.t),Math.abs(i.v.y)))&&(i.draw(),requestAnimationFrame(i.run))}},this.muted=void 0!==$&&$,this.audio={transient:new Audio("".concat("/lsj-action","/j.mp3")),dancing:new Audio("".concat("/lsj-action","/jntm.mp3")),crazy:new Audio("".concat("/lsj-action","/ngm.mp3"))};var r=this.height,o=this.width;this.container=n,n.style.position="relative",n.style.height=r+"px",n.style.width=o+"px";var u=this.image=new Image(460);u.src="lsj.png";var c=this.outline=document.createElement("div");c.style.position="absolute",c.style.left="50%",c.style.top="50%",c.style.transform="translate(-50%, -50%)",c.appendChild(u);var d=window.devicePixelRatio||1,h=this.canvas=document.createElement("canvas");h.width=o*d,h.height=r*d,h.style.width=o+"px",h.style.height=r+"px";var v=this.context=h.getContext("2d");v.setTransform(1,0,0,1,0,0),v.scale(d,d),this.mount()}return t.prototype.mount=function(){var t=this.outline,e=this.container;t.addEventListener("mousedown",this.start),t.addEventListener("touchstart",this.start),document.addEventListener("mousemove",this.move),document.addEventListener("touchmove",this.move),document.addEventListener("mouseup",this.end),document.addEventListener("mouseleave",this.end),document.addEventListener("touchcancel",this.end),document.addEventListener("touchend",this.end),e.appendChild(t),e.appendChild(this.canvas)},t}(),o=n(214),u=n.n(o),c=!0,d=function(){var t=(0,i.useRef)(null),e=(0,i.useRef)(null),n=(0,i.useState)(!0),a=n[0],s=n[1];(0,i.useEffect)(function(){var n=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);s(n);var $=e.current=new r({container:t.current,muted:n});return $.run(),function(){$.dispose()}},[]);var _=(0,i.useCallback)(function(){s(function(t){return!t})},[]);return(0,i.useMemo)(function(){var t;null===(t=e.current)||void 0===t||t.setMuted(a)},[a]),(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("div",{className:u().options,children:(0,$.jsx)("button",{className:u().bgm,onClick:_,children:a?(0,$.jsx)("svg",{width:"30px",height:"30",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:(0,$.jsx)("path",{fill:"#888",d:"M616.576 730.976c-5.056 5.216-10.08 10.432-14.304 16.16-24.096 32.512-31.68 70.24-20.864 103.648 15.648 48.288 66.656 79.456 129.92 79.456 21.248 0 42.752-3.456 63.904-10.304 9.632-3.136 18.784-6.816 27.424-11.008L616.576 730.976zM416 273.408l0-8.96 416-69.312 0 476.192 64 61.216L896 160c0-1.056-0.512-1.984-0.608-3.008-0.032-1.664 0.448-3.232 0.16-4.896-2.88-17.44-19.424-29.408-36.8-26.304l-480 80C370.24 207.2 363.2 211.936 358.4 218.336L416 273.408zM352 477.92l0 207.68c-20.128-9.376-43.648-14.784-69.408-14.784-21.28 0-42.816 3.456-63.968 10.336-39.584 12.8-73.568 36.224-95.584 65.984-24.096 32.512-31.68 70.24-20.864 103.648 15.648 48.288 66.656 79.456 129.92 79.456 21.248 0 42.752-3.456 63.904-10.304 58.656-19.04 100.32-59.2 115.04-103.808C413.92 811.328 416 806.016 416 800l0-5.216c1.056-8.512 1.056-17.024 0-25.6l0-230.048L352 477.92zM928 928c-7.968 0-15.904-2.944-22.112-8.864l-736-704C157.12 202.912 156.672 182.656 168.864 169.888c12.192-12.736 32.48-13.216 45.248-0.992l736 704c12.736 12.224 13.216 32.48 0.992 45.248C944.832 924.672 936.448 928 928 928z"})}):(0,$.jsx)("svg",{width:"30px",height:"30px",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:(0,$.jsx)("path",{fill:"#333333",d:"M895.456 770.56C895.552 769.696 896 768.896 896 768L896 160c0-1.056-0.512-1.984-0.608-3.008-0.032-1.664 0.448-3.232 0.16-4.928-2.88-17.408-19.328-29.184-36.8-26.304l-480 80c-17.408 2.912-29.216 19.392-26.304 36.832 0.256 1.472 1.024 2.656 1.44 4.032C352.96 249.664 352 252.672 352 256l0 429.6c-20.128-9.376-43.648-14.784-69.408-14.784-21.312 0-42.816 3.456-63.968 10.336-39.616 12.8-73.536 36.224-95.584 65.984-24.064 32.512-31.68 70.24-20.864 103.648 15.648 48.288 66.656 79.456 129.92 79.456 21.248 0 42.72-3.456 63.904-10.304 58.656-19.04 100.288-59.2 115.04-103.808C413.888 811.328 416 806.016 416 800l0-5.312c1.056-8.48 1.056-16.96 0-25.472L416 264.448l416-69.344 0 490.88c-20.32-9.632-44.096-15.2-70.176-15.2-21.28 0-42.816 3.456-63.968 10.336-39.584 12.8-73.568 36.224-95.584 65.984-24.096 32.512-31.68 70.24-20.864 103.648 15.648 48.288 66.656 79.456 129.92 79.456 21.248 0 42.752-3.456 63.904-10.304C853.472 894.56 902.176 831.68 895.456 770.56z"})})})}),(0,$.jsx)("div",{className:u().container,children:(0,$.jsx)("div",{className:u().stage,ref:t})})]})}},214:function(t){t.exports={container:"Home_container__bCOhY",stage:"Home_stage__80p1Q",options:"Home_options__Lxd7W",bgm:"Home_bgm__ro3pg",mute:"Home_mute__Q0jOB",github:"Home_github__cSqgs"}}},function(t){t.O(0,[774,888,179],function(){return t(t.s=8312)}),_N_E=t.O()}]);